
# 索引数据结构：二叉树、红黑树、hash、B+树
### 为什么不用二叉树
- 因为如果是数据是顺序递增插入的话，用二叉树就会变成个链表。
### 为什么不用红黑树
- 因为红黑树其实也是个二叉树，如果数据量上百千万，树的高度会太高
### 为什么不用B树，而用B+树
- B树就是一个节点放很多个索引和data(索引所在行的磁盘文件地址)，索引元素之间会存储下一层的节点的地址。
- B+树其实是在B树的基础上做了优化，第一个优化就是非叶子节点不存储data，只存储冗余索引，叶子节点包含所有索引；第二个优化就是叶子节点之间有双向的指针，可以用于范围查询。
- B+树查询性能好就是因为，从B+树根节点开始，会先low一个节点到内存，这个是比较耗时的，然后在内存里面做数据比对找到要找的数据的下一层的节点地址，这个不是特别耗时。而红黑树一个索引就一个节点，把节点的数据low到内存是特别耗时的。mysql三层的树高就可以存储两千多万的数据。而且mysql可能会把根节点常驻到内存里面，
- 为什么要把data都放到叶子节点，就是因为树的高度是由非叶子节点能放多少个索引决定的，一个节点存越多索引，树的高度就越低，而且节点越少，也可以减少把节点low到内存的时间。
- 为什么要加个双向指针？

```text
比如索引是bigint，占8byte，一个地址是6Byte，那么一个非叶子节点可以存储1170个元素，而叶子节点存的data一般不超过1k，那一个叶子节点就可以存储16个数据，那三层的树，就可以存储1170*1170*16=两千多万
```
# myisam和innodb
## myisam
- 表的底层存储是frm（表结构信息）、myd（data）、myi（index）三个文件，myd存的是数据，myi存的是索引的B+树。索引和数据是分开存储，这种叫非聚簇索引。索引的B+树的叶子节点的data存的是数据的某一个行的地址。

## innodb
- 表的底层存储是frm（表结构信息）、ibd（data+index）三个文件。ibd存储的是数据和索引在一起的B+树，索引和数据存在一起，这种叫聚簇索引，数据存在B+树的叶子节点。


# 聚集索引、聚簇索引、稀疏索引是什么

# 为什么推荐使用自增索引做主键

# 联合索引底层数据结构

# mysql最左前缀优化原则
